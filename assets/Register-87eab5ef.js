import{d as U,u as C,g as f,h as c,c as F,b as s,w as l,e as P,r as n,o as q,a as i,f as _,E as w,_ as E}from"./index-b96a8e1c.js";const h={class:"register-container"},B={class:"login-link"},L=U({__name:"Register",setup(M){const g=P(),b=C(),d=f(),u=f(!1),r=c({email:"",username:"",password:"",confirmPassword:""}),v=c({email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:2,max:20,message:"用户名长度在 2 到 20 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度至少为6位",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(m,e,o)=>{e!==r.password?o(new Error("两次输入密码不一致")):o()},trigger:"blur"}]}),y=async()=>{d.value&&await d.value.validate(async m=>{var e,o;if(m){u.value=!0;try{await b.register(r.username,r.email,r.password),w.success("注册成功，请登录"),g.push("/login")}catch(a){const p=((o=(e=a.response)==null?void 0:e.data)==null?void 0:o.message)||"注册失败，请稍后重试";w.error(p),console.error("Register error:",a)}finally{u.value=!1}}})},V=()=>{g.push("/login")};return(m,e)=>{const o=n("el-input"),a=n("el-form-item"),p=n("el-button"),x=n("el-link"),k=n("el-form"),R=n("el-card");return q(),F("div",h,[s(R,{class:"register-card"},{header:l(()=>[...e[4]||(e[4]=[i("div",{class:"register-header"},[i("span",null,"用户注册")],-1)])]),default:l(()=>[s(k,{model:r,rules:v,ref_key:"registerFormRef",ref:d,"label-width":"80px"},{default:l(()=>[s(a,{label:"邮箱",prop:"email"},{default:l(()=>[s(o,{modelValue:r.email,"onUpdate:modelValue":e[0]||(e[0]=t=>r.email=t),placeholder:"请输入邮箱","prefix-icon":"MessageFilled"},null,8,["modelValue"])]),_:1}),s(a,{label:"用户名",prop:"username"},{default:l(()=>[s(o,{modelValue:r.username,"onUpdate:modelValue":e[1]||(e[1]=t=>r.username=t),placeholder:"请输入用户名","prefix-icon":"UserFilled"},null,8,["modelValue"])]),_:1}),s(a,{label:"密码",prop:"password"},{default:l(()=>[s(o,{modelValue:r.password,"onUpdate:modelValue":e[2]||(e[2]=t=>r.password=t),type:"password",placeholder:"请输入密码","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),s(a,{label:"确认密码",prop:"confirmPassword"},{default:l(()=>[s(o,{modelValue:r.confirmPassword,"onUpdate:modelValue":e[3]||(e[3]=t=>r.confirmPassword=t),type:"password",placeholder:"请再次输入密码","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),s(a,null,{default:l(()=>[s(p,{type:"primary",loading:u.value,onClick:y,style:{width:"100%"}},{default:l(()=>[...e[5]||(e[5]=[_("注册",-1)])]),_:1},8,["loading"])]),_:1}),i("div",B,[e[7]||(e[7]=i("span",null,"已有账号？",-1)),s(x,{type:"primary",underline:!1,onClick:V},{default:l(()=>[...e[6]||(e[6]=[_("立即登录",-1)])]),_:1})])]),_:1},8,["model","rules"])]),_:1})])}}});const S=E(L,[["__scopeId","data-v-7b80ee02"]]);export{S as default};
