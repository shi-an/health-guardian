import{d as M,u as R,g as f,h as c,c as F,b as l,w as o,e as U,r,o as B,a as n,f as i,E as b,_ as E}from"./index-f690039b.js";const N={class:"login-container"},q={class:"register-link"},S=M({__name:"Login",setup(T){const m=U(),w=R(),d=f(),u=f(!1),s=c({email:"",password:"",rememberMe:!1}),y=c({email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度至少为6位",trigger:"blur"}]}),v=async()=>{d.value&&await d.value.validate(async p=>{if(p){u.value=!0;try{await w.login(s.email,s.password),b.success("登录成功"),m.push("/")}catch(e){b.error("登录失败，请检查邮箱和密码"),console.error("Login error:",e)}finally{u.value=!1}}})},V=()=>{m.push("/register")};return(p,e)=>{const _=r("el-input"),a=r("el-form-item"),k=r("el-checkbox"),g=r("el-link"),x=r("el-button"),L=r("el-form"),C=r("el-card");return B(),F("div",N,[l(C,{class:"login-card"},{header:o(()=>[...e[3]||(e[3]=[n("div",{class:"login-header"},[n("span",null,"用户登录")],-1)])]),default:o(()=>[l(L,{model:s,rules:y,ref_key:"loginFormRef",ref:d,"label-width":"80px"},{default:o(()=>[l(a,{label:"邮箱",prop:"email"},{default:o(()=>[l(_,{modelValue:s.email,"onUpdate:modelValue":e[0]||(e[0]=t=>s.email=t),placeholder:"请输入邮箱","prefix-icon":"MessageFilled"},null,8,["modelValue"])]),_:1}),l(a,{label:"密码",prop:"password"},{default:o(()=>[l(_,{modelValue:s.password,"onUpdate:modelValue":e[1]||(e[1]=t=>s.password=t),type:"password",placeholder:"请输入密码","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),l(a,null,{default:o(()=>[l(k,{modelValue:s.rememberMe,"onUpdate:modelValue":e[2]||(e[2]=t=>s.rememberMe=t)},{default:o(()=>[...e[4]||(e[4]=[i("记住我",-1)])]),_:1},8,["modelValue"]),l(g,{type:"primary",underline:!1,class:"reset-password"},{default:o(()=>[...e[5]||(e[5]=[i("忘记密码？",-1)])]),_:1})]),_:1}),l(a,null,{default:o(()=>[l(x,{type:"primary",loading:u.value,onClick:v,style:{width:"100%"}},{default:o(()=>[...e[6]||(e[6]=[i("登录",-1)])]),_:1},8,["loading"])]),_:1}),n("div",q,[e[8]||(e[8]=n("span",null,"还没有账号？",-1)),l(g,{type:"primary",underline:!1,onClick:V},{default:o(()=>[...e[7]||(e[7]=[i("立即注册",-1)])]),_:1})])]),_:1},8,["model","rules"])]),_:1})])}}});const h=E(S,[["__scopeId","data-v-bd29d089"]]);export{h as default};
