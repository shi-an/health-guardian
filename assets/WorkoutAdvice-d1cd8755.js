import{u as P}from"./ai-9c3a86e1.js";import{d as $,g as _,h as v,c as k,b as o,w as l,r as n,o as w,a as i,f as y,k as B,E as f,_ as E}from"./index-d73d4e79.js";const I={class:"workout-container"},D={key:0,class:"workout-plan-result"},F=["innerHTML"],M=$({__name:"WorkoutAdvice",setup(S){const h=P(),c=_(),p=_(!1),s=_(""),t=v({goal:"",frequency:3,duration:60,experience:"初学者",healthCondition:""}),V=v({goal:[{required:!0,message:"请选择锻炼目标",trigger:"change"}],frequency:[{required:!0,message:"请输入每周锻炼次数",trigger:"blur"}],duration:[{required:!0,message:"请输入每次锻炼时长",trigger:"blur"}],experience:[{required:!0,message:"请选择健身经验",trigger:"change"}]}),x=async()=>{c.value&&await c.value.validate(async u=>{if(u){p.value=!0;try{const e=await h.generateWorkoutPlan(t);s.value=e,f.success("健身计划生成成功")}catch(e){f.error("生成失败，请稍后重试"),console.error("Generate workout plan error:",e)}finally{p.value=!1}}})},C=u=>u.replace(/\n/g,"<br>").replace(/### (.*?)(?=<br>|$)/g,"<h4>$1</h4>").replace(/## (.*?)(?=<br>|$)/g,"<h3>$1</h3>"),q=()=>{const u=new Blob([s.value],{type:"text/plain;charset=utf-8"}),e=URL.createObjectURL(u),a=document.createElement("a");a.href=e,a.download=`健身计划_${new Date().toLocaleDateString("zh-CN").replace(/\//g,"-")}.txt`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(e),f.success("计划已下载")};return(u,e)=>{const a=n("el-option"),U=n("el-select"),d=n("el-form-item"),b=n("el-input-number"),m=n("el-radio"),L=n("el-radio-group"),R=n("el-input"),g=n("el-button"),W=n("el-form"),A=n("el-divider"),N=n("el-card");return w(),k("div",I,[o(N,{class:"workout-card"},{header:l(()=>[...e[5]||(e[5]=[i("div",{class:"workout-header"},[i("span",null,"AI健身建议")],-1)])]),default:l(()=>[o(W,{model:t,rules:V,ref_key:"workoutFormRef",ref:c,"label-width":"120px"},{default:l(()=>[o(d,{label:"锻炼目标",prop:"goal"},{default:l(()=>[o(U,{modelValue:t.goal,"onUpdate:modelValue":e[0]||(e[0]=r=>t.goal=r),placeholder:"请选择您的锻炼目标"},{default:l(()=>[o(a,{label:"增肌",value:"muscle_gain"}),o(a,{label:"减脂",value:"fat_loss"}),o(a,{label:"增强耐力",value:"endurance"}),o(a,{label:"改善灵活性",value:"flexibility"}),o(a,{label:"整体健康",value:"overall_health"})]),_:1},8,["modelValue"])]),_:1}),o(d,{label:"每周锻炼次数",prop:"frequency"},{default:l(()=>[o(b,{modelValue:t.frequency,"onUpdate:modelValue":e[1]||(e[1]=r=>t.frequency=r),min:1,max:7,placeholder:"请输入每周锻炼次数"},null,8,["modelValue"])]),_:1}),o(d,{label:"每次锻炼时长(分钟)",prop:"duration"},{default:l(()=>[o(b,{modelValue:t.duration,"onUpdate:modelValue":e[2]||(e[2]=r=>t.duration=r),min:15,max:180,placeholder:"请输入每次锻炼时长"},null,8,["modelValue"])]),_:1}),o(d,{label:"健身经验",prop:"experience"},{default:l(()=>[o(L,{modelValue:t.experience,"onUpdate:modelValue":e[3]||(e[3]=r=>t.experience=r)},{default:l(()=>[o(m,{label:"初学者"}),o(m,{label:"中级"}),o(m,{label:"高级"})]),_:1},8,["modelValue"])]),_:1}),o(d,{label:"身体状况",prop:"healthCondition"},{default:l(()=>[o(R,{modelValue:t.healthCondition,"onUpdate:modelValue":e[4]||(e[4]=r=>t.healthCondition=r),type:"textarea",rows:3,placeholder:"请简要描述您的身体状况，如有伤病史请说明"},null,8,["modelValue"])]),_:1}),o(d,null,{default:l(()=>[o(g,{type:"primary",loading:p.value,onClick:x,style:{width:"100%"}},{default:l(()=>[...e[6]||(e[6]=[y("生成健身计划",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"]),s.value?(w(),k("div",D,[e[8]||(e[8]=i("h3",null,"AI生成的健身计划",-1)),o(A),i("div",{innerHTML:C(s.value)},null,8,F),o(g,{type:"success",icon:"Download",onClick:q,class:"download-button"},{default:l(()=>[...e[7]||(e[7]=[y("下载计划",-1)])]),_:1})])):B("",!0)]),_:1})])}}});const H=E(M,[["__scopeId","data-v-2b984ca5"]]);export{H as default};
