import{d as U,u as C,g,h as f,c as F,b as s,w as l,e as P,r as t,o as q,a as i,f as _,E as c,_ as E}from"./index-f690039b.js";const h={class:"register-container"},B={class:"login-link"},L=U({__name:"Register",setup(N){const p=P(),w=C(),d=g(),u=g(!1),r=f({email:"",username:"",password:"",confirmPassword:""}),b=f({email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:2,max:20,message:"用户名长度在 2 到 20 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度至少为6位",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(m,e,o)=>{e!==r.password?o(new Error("两次输入密码不一致")):o()},trigger:"blur"}]}),v=async()=>{d.value&&await d.value.validate(async m=>{if(m){u.value=!0;try{await w.register({email:r.email,username:r.username,password:r.password}),c.success("注册成功，请登录"),p.push("/login")}catch(e){c.error("注册失败，请稍后重试"),console.error("Register error:",e)}finally{u.value=!1}}})},y=()=>{p.push("/login")};return(m,e)=>{const o=t("el-input"),n=t("el-form-item"),V=t("el-button"),x=t("el-link"),k=t("el-form"),R=t("el-card");return q(),F("div",h,[s(R,{class:"register-card"},{header:l(()=>[...e[4]||(e[4]=[i("div",{class:"register-header"},[i("span",null,"用户注册")],-1)])]),default:l(()=>[s(k,{model:r,rules:b,ref_key:"registerFormRef",ref:d,"label-width":"80px"},{default:l(()=>[s(n,{label:"邮箱",prop:"email"},{default:l(()=>[s(o,{modelValue:r.email,"onUpdate:modelValue":e[0]||(e[0]=a=>r.email=a),placeholder:"请输入邮箱","prefix-icon":"MessageFilled"},null,8,["modelValue"])]),_:1}),s(n,{label:"用户名",prop:"username"},{default:l(()=>[s(o,{modelValue:r.username,"onUpdate:modelValue":e[1]||(e[1]=a=>r.username=a),placeholder:"请输入用户名","prefix-icon":"UserFilled"},null,8,["modelValue"])]),_:1}),s(n,{label:"密码",prop:"password"},{default:l(()=>[s(o,{modelValue:r.password,"onUpdate:modelValue":e[2]||(e[2]=a=>r.password=a),type:"password",placeholder:"请输入密码","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),s(n,{label:"确认密码",prop:"confirmPassword"},{default:l(()=>[s(o,{modelValue:r.confirmPassword,"onUpdate:modelValue":e[3]||(e[3]=a=>r.confirmPassword=a),type:"password",placeholder:"请再次输入密码","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),s(n,null,{default:l(()=>[s(V,{type:"primary",loading:u.value,onClick:v,style:{width:"100%"}},{default:l(()=>[...e[5]||(e[5]=[_("注册",-1)])]),_:1},8,["loading"])]),_:1}),i("div",B,[e[7]||(e[7]=i("span",null,"已有账号？",-1)),s(x,{type:"primary",underline:!1,onClick:y},{default:l(()=>[...e[6]||(e[6]=[_("立即登录",-1)])]),_:1})])]),_:1},8,["model","rules"])]),_:1})])}}});const S=E(L,[["__scopeId","data-v-d63affb6"]]);export{S as default};
