import{u as E}from"./ai-6e12764e.js";import{d as F,g as D,u as I,h as R,i as H,c as g,a as s,b as e,w as l,j as O,k as T,r as n,o as p,l as z,f as c,F as U,m as L,t as m,_ as G}from"./index-95e23740.js";const J={class:"diet-plan"},K={class:"container"},Q={class:"meal-plan"},W={class:"meal-header"},X={class:"meal-content"},Y={class:"nutrition-analysis"},Z={class:"description"},$=F({__name:"DietPlan",setup(ee){const b=D(),w=E(),f=I(),a=R({age:void 0,gender:void 0,height:void 0,weight:void 0,goal:void 0,activityLevel:void 0,allergies:""}),i=D(null),q={age:[{required:!0,message:"请输入年龄",trigger:"blur"}],gender:[{required:!0,message:"请选择性别",trigger:"change"}],height:[{required:!0,message:"请输入身高",trigger:"blur"}],weight:[{required:!0,message:"请输入体重",trigger:"blur"}],goal:[{required:!0,message:"请选择健康目标",trigger:"change"}],activityLevel:[{required:!0,message:"请选择活动水平",trigger:"change"}]};H(()=>{var d;(d=f.user)!=null&&d.healthData&&Object.assign(a,f.user.healthData)});const P=async()=>{if(!(!b.value||!await b.value.validate()))try{const t=await w.generateDietPlan(a);i.value=t,f.isAuthenticated&&await f.updateHealthData(a)}catch{ElMessage.error("生成饮食计划失败，请稍后重试")}},C=d=>({breakfast:"早餐",lunch:"午餐",dinner:"晚餐",snacks:"加餐"})[d]||d;return(d,t)=>{const h=n("el-input-number"),u=n("el-form-item"),_=n("el-col"),r=n("el-option"),V=n("el-select"),y=n("el-row"),N=n("el-input"),S=n("el-button"),B=n("el-form"),k=n("el-card"),v=n("el-descriptions-item"),M=n("el-descriptions");return p(),g("div",J,[s("div",K,[t[11]||(t[11]=s("h1",{class:"page-title"},"个性化饮食规划",-1)),e(k,{class:"diet-form"},{header:l(()=>[...t[7]||(t[7]=[s("h2",null,"请输入您的健康信息",-1)])]),default:l(()=>[e(B,{model:a,rules:q,ref_key:"formRef",ref:b,"label-width":"120px"},{default:l(()=>[e(y,{gutter:20},{default:l(()=>[e(_,{span:12},{default:l(()=>[e(u,{label:"年龄",prop:"age"},{default:l(()=>[e(h,{modelValue:a.age,"onUpdate:modelValue":t[0]||(t[0]=o=>a.age=o),min:1,max:120},null,8,["modelValue"])]),_:1})]),_:1}),e(_,{span:12},{default:l(()=>[e(u,{label:"性别",prop:"gender"},{default:l(()=>[e(V,{modelValue:a.gender,"onUpdate:modelValue":t[1]||(t[1]=o=>a.gender=o),placeholder:"请选择性别"},{default:l(()=>[e(r,{label:"男性",value:"male"}),e(r,{label:"女性",value:"female"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(y,{gutter:20},{default:l(()=>[e(_,{span:12},{default:l(()=>[e(u,{label:"身高 (cm)",prop:"height"},{default:l(()=>[e(h,{modelValue:a.height,"onUpdate:modelValue":t[2]||(t[2]=o=>a.height=o),min:50,max:250},null,8,["modelValue"])]),_:1})]),_:1}),e(_,{span:12},{default:l(()=>[e(u,{label:"体重 (kg)",prop:"weight"},{default:l(()=>[e(h,{modelValue:a.weight,"onUpdate:modelValue":t[3]||(t[3]=o=>a.weight=o),min:20,max:200},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(y,{gutter:20},{default:l(()=>[e(_,{span:12},{default:l(()=>[e(u,{label:"健康目标",prop:"goal"},{default:l(()=>[e(V,{modelValue:a.goal,"onUpdate:modelValue":t[4]||(t[4]=o=>a.goal=o),placeholder:"请选择目标"},{default:l(()=>[e(r,{label:"减重",value:"weight-loss"}),e(r,{label:"维持体重",value:"maintain"}),e(r,{label:"增肌",value:"muscle-gain"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(_,{span:12},{default:l(()=>[e(u,{label:"活动水平",prop:"activityLevel"},{default:l(()=>[e(V,{modelValue:a.activityLevel,"onUpdate:modelValue":t[5]||(t[5]=o=>a.activityLevel=o),placeholder:"请选择活动水平"},{default:l(()=>[e(r,{label:"久坐",value:"sedentary"}),e(r,{label:"轻度活动",value:"light"}),e(r,{label:"中度活动",value:"moderate"}),e(r,{label:"活跃",value:"active"}),e(r,{label:"非常活跃",value:"very-active"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(u,{label:"过敏食物"},{default:l(()=>[e(N,{modelValue:a.allergies,"onUpdate:modelValue":t[6]||(t[6]=o=>a.allergies=o),placeholder:"例如：海鲜、花生等（多个用逗号分隔）"},null,8,["modelValue"])]),_:1}),e(u,null,{default:l(()=>[e(S,{type:"primary",onClick:P,loading:z(w).isLoading},{default:l(()=>[...t[8]||(t[8]=[c(" 生成饮食计划 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1}),i.value?(p(),O(k,{key:0,class:"diet-result"},{header:l(()=>[...t[9]||(t[9]=[s("h2",null,"您的个性化饮食计划",-1)])]),default:l(()=>[s("div",Q,[(p(!0),g(U,null,L(i.value.meals,(o,x)=>(p(),g("div",{class:"meal-card",key:x},[s("div",W,m(C(x)),1),s("div",X,[s("ul",null,[(p(!0),g(U,null,L(o,(j,A)=>(p(),g("li",{key:A},m(j),1))),128))])])]))),128))]),s("div",Y,[t[10]||(t[10]=s("h3",null,"营养分析",-1)),e(M,{column:2,border:""},{default:l(()=>[e(v,{label:"总热量"},{default:l(()=>[c(m(i.value.nutrition.calories)+" kcal ",1)]),_:1}),e(v,{label:"蛋白质"},{default:l(()=>[c(m(i.value.nutrition.protein)+"g ",1)]),_:1}),e(v,{label:"碳水化合物"},{default:l(()=>[c(m(i.value.nutrition.carbs)+"g ",1)]),_:1}),e(v,{label:"脂肪"},{default:l(()=>[c(m(i.value.nutrition.fat)+"g ",1)]),_:1})]),_:1}),s("p",Z,m(i.value.description),1)])]),_:1})):T("",!0)])])}}});const ae=G($,[["__scopeId","data-v-796e3a68"]]);export{ae as default};
