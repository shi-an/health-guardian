import{d as C,u as F,g as f,h as c,c as P,b as r,w as l,e as q,r as d,o as E,a as o,f as _,E as w,_ as h}from"./index-2dfb291b.js";const B={class:"register-container"},L={class:"register-tips"},M={class:"login-link"},N=C({__name:"Register",setup(S){const g=q(),v=F(),u=f(),m=f(!1),s=c({email:"",username:"",password:"",confirmPassword:""}),b=c({email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:2,max:20,message:"用户名长度在 2 到 20 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度至少为6位",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(p,e,t)=>{e!==s.password?t(new Error("两次输入密码不一致")):t()},trigger:"blur"}]}),y=async()=>{u.value&&await u.value.validate(async p=>{var e,t;if(p){m.value=!0;try{await v.register(s.username,s.email,s.password),w.success("注册成功，请登录"),g.push("/login")}catch(a){const n=((t=(e=a.response)==null?void 0:e.data)==null?void 0:t.message)||"注册失败，请稍后重试";w.error(n),console.error("Register error:",a)}finally{m.value=!1}}})},V=()=>{g.push("/login")};return(p,e)=>{const t=d("el-alert"),a=d("el-input"),n=d("el-form-item"),x=d("el-button"),k=d("el-link"),R=d("el-form"),U=d("el-card");return E(),P("div",B,[r(U,{class:"register-card"},{header:l(()=>[...e[4]||(e[4]=[o("div",{class:"register-header"},[o("span",null,"用户注册")],-1)])]),default:l(()=>[r(R,{model:s,rules:b,ref_key:"registerFormRef",ref:u,"label-width":"80px"},{default:l(()=>[o("div",L,[r(t,{title:"注册须知",type:"info",closable:!1,"show-icon":""},{default:l(()=>[...e[5]||(e[5]=[o("div",{class:"tips-content"},[o("p",null,"• 邮箱必须为有效的电子邮件地址"),o("p",null,"• 用户名长度在2-20个字符之间"),o("p",null,"• 密码长度至少6位，建议包含字母和数字")],-1)])]),_:1})]),r(n,{label:"邮箱",prop:"email"},{default:l(()=>[r(a,{modelValue:s.email,"onUpdate:modelValue":e[0]||(e[0]=i=>s.email=i),placeholder:"请输入有效的邮箱地址","prefix-icon":"MessageFilled","show-word-limit":"",maxlength:50},null,8,["modelValue"])]),_:1}),r(n,{label:"用户名",prop:"username"},{default:l(()=>[r(a,{modelValue:s.username,"onUpdate:modelValue":e[1]||(e[1]=i=>s.username=i),placeholder:"请输入2-20个字符的用户名","prefix-icon":"UserFilled","show-word-limit":"",maxlength:20},null,8,["modelValue"]),e[6]||(e[6]=o("div",{class:"form-tip"},"用户名长度在2-20个字符之间",-1))]),_:1}),r(n,{label:"密码",prop:"password"},{default:l(()=>[r(a,{modelValue:s.password,"onUpdate:modelValue":e[2]||(e[2]=i=>s.password=i),type:"password",placeholder:"请输入至少6位密码","prefix-icon":"Lock","show-password":""},null,8,["modelValue"]),e[7]||(e[7]=o("div",{class:"form-tip"},"密码长度至少6位，建议包含字母和数字",-1))]),_:1}),r(n,{label:"确认密码",prop:"confirmPassword"},{default:l(()=>[r(a,{modelValue:s.confirmPassword,"onUpdate:modelValue":e[3]||(e[3]=i=>s.confirmPassword=i),type:"password",placeholder:"请再次输入密码","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),r(n,null,{default:l(()=>[r(x,{type:"primary",loading:m.value,onClick:y,style:{width:"100%"}},{default:l(()=>[...e[8]||(e[8]=[_("注册",-1)])]),_:1},8,["loading"])]),_:1}),o("div",M,[e[10]||(e[10]=o("span",null,"已有账号？",-1)),r(k,{type:"primary",underline:!1,onClick:V},{default:l(()=>[...e[9]||(e[9]=[_("立即登录",-1)])]),_:1})])]),_:1},8,["model","rules"])]),_:1})])}}});const I=h(N,[["__scopeId","data-v-3a517ec9"]]);export{I as default};
