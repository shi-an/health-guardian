import{d as S,u as F,g as w,h as v,c as I,b as s,w as o,e as U,r,o as B,a as t,f as i,E as x,_ as N}from"./index-085b75c1.js";const T={class:"login-container"},q={class:"test-account-section"},z={class:"test-account-info"},A={class:"register-link"},j=S({__name:"Login",setup(D){const f=U(),k=F(),p=w(),c=w(!1),g=localStorage.getItem("rememberedEmail")||"",l=v({email:g,password:"",rememberMe:!!g}),V=v({email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度至少为6位",trigger:"blur"}]}),_=async()=>{p.value&&await p.value.validate(async b=>{var e,m;if(b){c.value=!0;try{await k.login(l.email,l.password),l.rememberMe?localStorage.setItem("rememberedEmail",l.email):localStorage.removeItem("rememberedEmail"),x.success("登录成功"),f.push("/")}catch(a){console.error("登录失败:",a);let n="登录失败，请检查邮箱和密码";((e=a.response)==null?void 0:e.status)===401?n="邮箱或密码错误":((m=a.response)==null?void 0:m.status)===500?n="服务器错误，请稍后重试":a.message&&(n=a.message),x.error(n)}finally{c.value=!1}}})},M=()=>{f.push("/register")},E=async()=>{l.email="test@example.com",l.password="123456",l.rememberMe=!0,await _()};return(b,e)=>{const m=r("el-button"),a=r("el-alert"),n=r("el-input"),u=r("el-form-item"),C=r("el-checkbox"),y=r("el-link"),L=r("el-form"),R=r("el-card");return B(),I("div",T,[s(R,{class:"login-card"},{header:o(()=>[...e[3]||(e[3]=[t("div",{class:"login-header"},[t("span",null,"用户登录")],-1)])]),default:o(()=>[t("div",q,[s(a,{title:"测试账户",type:"info",closable:!1,"show-icon":""},{default:o(()=>[t("div",z,[e[5]||(e[5]=t("p",null,[t("strong",null,"邮箱："),i("test@example.com")],-1)),e[6]||(e[6]=t("p",null,[t("strong",null,"密码："),i("123456")],-1)),s(m,{type:"primary",size:"small",onClick:E,style:{"margin-top":"8px"}},{default:o(()=>[...e[4]||(e[4]=[i(" 使用测试账户登录 ",-1)])]),_:1})])]),_:1})]),s(L,{model:l,rules:V,ref_key:"loginFormRef",ref:p,"label-width":"80px"},{default:o(()=>[s(u,{label:"邮箱",prop:"email"},{default:o(()=>[s(n,{modelValue:l.email,"onUpdate:modelValue":e[0]||(e[0]=d=>l.email=d),placeholder:"请输入邮箱","prefix-icon":"MessageFilled"},null,8,["modelValue"])]),_:1}),s(u,{label:"密码",prop:"password"},{default:o(()=>[s(n,{modelValue:l.password,"onUpdate:modelValue":e[1]||(e[1]=d=>l.password=d),type:"password",placeholder:"请输入密码","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),s(u,null,{default:o(()=>[s(C,{modelValue:l.rememberMe,"onUpdate:modelValue":e[2]||(e[2]=d=>l.rememberMe=d)},{default:o(()=>[...e[7]||(e[7]=[i("记住我",-1)])]),_:1},8,["modelValue"]),s(y,{type:"primary",underline:!1,class:"reset-password"},{default:o(()=>[...e[8]||(e[8]=[i("忘记密码？",-1)])]),_:1})]),_:1}),s(u,null,{default:o(()=>[s(m,{type:"primary",loading:c.value,onClick:_,style:{width:"100%"}},{default:o(()=>[...e[9]||(e[9]=[i("登录",-1)])]),_:1},8,["loading"])]),_:1}),t("div",A,[e[11]||(e[11]=t("span",null,"还没有账号？",-1)),s(y,{type:"primary",underline:!1,onClick:M},{default:o(()=>[...e[10]||(e[10]=[i("立即注册",-1)])]),_:1})])]),_:1},8,["model","rules"])]),_:1})])}}});const H=N(j,[["__scopeId","data-v-ce564289"]]);export{H as default};
