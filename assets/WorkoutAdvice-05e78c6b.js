import{u as E}from"./ai-1f3a2c92.js";import{d as N,r as f,l as k,c as y,e as o,w as a,h as u,i as w,b as c,j as h,k as P,E as v,_ as B}from"./index-19f31b93.js";const I={class:"workout-container"},j={key:0,class:"workout-plan-result"},D=["innerHTML"],F=N({__name:"WorkoutAdvice",setup(M){const V=E(),p=f(),m=f(!1),s=f(null),r=k({goal:"",frequency:3,duration:60,experience:"初学者",healthCondition:""}),$=k({goal:[{required:!0,message:"请选择锻炼目标",trigger:"change"}],frequency:[{required:!0,message:"请输入每周锻炼次数",trigger:"blur"}],duration:[{required:!0,message:"请输入每次锻炼时长",trigger:"blur"}],experience:[{required:!0,message:"请选择健身经验",trigger:"change"}]}),C=async()=>{p.value&&await p.value.validate(async l=>{if(l){m.value=!0;try{const e=await V.generateWorkoutPlan(r);s.value=e,v.success("健身计划生成成功")}catch(e){v.error("生成失败，请稍后重试"),console.error("Generate workout plan error:",e)}finally{m.value=!1}}})},q=l=>{let e="<h3>运动计划概览</h3>";return e+=`<p>总时长: ${l.duration}分钟</p>`,e+=`<p>频率: ${l.frequency}</p>`,e+=`<p>强度: ${l.intensity}</p>`,e+="<h3>推荐运动</h3>",e+="<ul>",l.exercises.forEach(t=>{t.duration>0?e+=`<li>${t.name} - ${t.duration}分钟</li>`:e+=`<li>${t.name} - ${t.sets}组×${t.reps}次</li>`}),e+="</ul>",e},x=()=>{if(!s.value)return;let l=`健身计划概览
`;l+=`总时长: ${s.value.duration}分钟
`,l+=`频率: ${s.value.frequency}
`,l+=`强度: ${s.value.intensity}

`,l+=`推荐运动
`,s.value.exercises.forEach(n=>{n.duration>0?l+=`- ${n.name}: ${n.duration}分钟
`:l+=`- ${n.name}: ${n.sets}组×${n.reps}次
`});const e=new Blob([l],{type:"text/plain;charset=utf-8"}),t=URL.createObjectURL(e),i=document.createElement("a");i.href=t,i.download=`健身计划_${new Date().toLocaleDateString("zh-CN").replace(/\//g,"-")}.txt`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(t),v.success("计划已下载")};return(l,e)=>{const t=u("el-option"),i=u("el-select"),n=u("el-form-item"),b=u("el-input-number"),_=u("el-radio"),U=u("el-radio-group"),L=u("el-input"),g=u("el-button"),R=u("el-form"),W=u("el-divider"),A=u("el-card");return w(),y("div",I,[o(A,{class:"workout-card"},{header:a(()=>[...e[5]||(e[5]=[c("div",{class:"workout-header"},[c("span",null,"AI健身建议")],-1)])]),default:a(()=>[o(R,{model:r,rules:$,ref_key:"workoutFormRef",ref:p,"label-width":"120px"},{default:a(()=>[o(n,{label:"锻炼目标",prop:"goal"},{default:a(()=>[o(i,{modelValue:r.goal,"onUpdate:modelValue":e[0]||(e[0]=d=>r.goal=d),placeholder:"请选择您的锻炼目标"},{default:a(()=>[o(t,{label:"增肌",value:"muscle_gain"}),o(t,{label:"减脂",value:"fat_loss"}),o(t,{label:"增强耐力",value:"endurance"}),o(t,{label:"改善灵活性",value:"flexibility"}),o(t,{label:"整体健康",value:"overall_health"})]),_:1},8,["modelValue"])]),_:1}),o(n,{label:"每周锻炼次数",prop:"frequency"},{default:a(()=>[o(b,{modelValue:r.frequency,"onUpdate:modelValue":e[1]||(e[1]=d=>r.frequency=d),min:1,max:7,placeholder:"请输入每周锻炼次数"},null,8,["modelValue"])]),_:1}),o(n,{label:"每次锻炼时长(分钟)",prop:"duration"},{default:a(()=>[o(b,{modelValue:r.duration,"onUpdate:modelValue":e[2]||(e[2]=d=>r.duration=d),min:15,max:180,placeholder:"请输入每次锻炼时长"},null,8,["modelValue"])]),_:1}),o(n,{label:"健身经验",prop:"experience"},{default:a(()=>[o(U,{modelValue:r.experience,"onUpdate:modelValue":e[3]||(e[3]=d=>r.experience=d)},{default:a(()=>[o(_,{label:"初学者"}),o(_,{label:"中级"}),o(_,{label:"高级"})]),_:1},8,["modelValue"])]),_:1}),o(n,{label:"身体状况",prop:"healthCondition"},{default:a(()=>[o(L,{modelValue:r.healthCondition,"onUpdate:modelValue":e[4]||(e[4]=d=>r.healthCondition=d),type:"textarea",rows:3,placeholder:"请简要描述您的身体状况，如有伤病史请说明"},null,8,["modelValue"])]),_:1}),o(n,null,{default:a(()=>[o(g,{type:"primary",loading:m.value,onClick:C,style:{width:"100%"}},{default:a(()=>[...e[6]||(e[6]=[h("生成健身计划",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"]),s.value?(w(),y("div",j,[e[8]||(e[8]=c("h3",null,"AI生成的健身计划",-1)),o(W),c("div",{innerHTML:q(s.value)},null,8,D),o(g,{type:"success",icon:"Download",onClick:x,class:"download-button"},{default:a(()=>[...e[7]||(e[7]=[h("下载计划",-1)])]),_:1})])):P("",!0)]),_:1})])}}});const H=B(F,[["__scopeId","data-v-387ab92e"]]);export{H as default};
